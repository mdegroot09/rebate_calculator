<script>

window.addEventListener('load', function(){
  document.getElementById('selectPct').checked = true
})

function usePct(){
  if (document.getElementById('selectDollars').checked == false){
    return
  }
  
  var bac = document.getElementById('bac')
  bac.placeholder = 'pct'
  bac.value = ''
  bac.classList.add('bacPct')
  bac.classList.remove('bacDollars')
  
  // update old 
  var oldEl = document.getElementById('selectDollars')
  oldEl.checked = false
  oldEl.classList.remove('activeBacType')
  
  // update new
  var newEl = document.getElementById('selectPct')
  newEl.checked = true
  newEl.classList.add('activeBacType')
  
  document.getElementById('pctSign').innerText = '%'
  document.getElementById('dollarSign').innerText = ''
}

function useDollars(){
  if (document.getElementById('selectPct').checked == false){
    return
  }

  var bac = document.getElementById('bac')
  bac.placeholder = 'dollars'
  bac.value = ''
  bac.classList.add('bacDollars')
  bac.classList.remove('bacPct')
  
  // update old 
  var oldEl = document.getElementById('selectPct')
  oldEl.checked = false
  oldEl.classList.remove('activeBacType')
  
  // update new
  var newEl = document.getElementById('selectDollars')
  newEl.checked = true
  newEl.classList.add('activeBacType')
  
  document.getElementById('pctSign').innerText = ''
  document.getElementById('dollarSign').innerText = '$'
}

function updateRebate(){
  var price = document.getElementById('price').value
  var bacVal = document.getElementById('bac').value
  var bac, rebate, usingLoans, usingTitle, pct
  
  // get total BAC
  var homieToHomie = document.getElementById('homieToHomie').checked
  var selectPct = document.getElementById('selectPct')
  if (homieToHomie){
    bac = 5000
    hidePriceAndBac()
  }  
  else if (selectPct.checked == true){
    bac = price * bacVal / 100
    showPriceAndBac()
  }
  else {
    bac = bacVal
    showPriceAndBac()
  }
  
  bac = Math.round(bac * 100) / 100
  pct = 0

  // if using Homie Loans
  usingLoans = document.getElementById('usingLoans').checked
  if (usingLoans){
    pct += 30
  }

  // if using Homie Title
  usingTitle = document.getElementById('usingTitle').checked
  if (usingTitle){
    pct += 20
  }

  // set rebate to 0 if negative
  if (!rebate || rebate < 0){
    rebate = 0
  }
  
  rebate = bac * (pct / 100)
  rebate = Math.round(rebate * 100) / 100
  
  // main rebate figure
  document.getElementById('rebateNum').innerText = rebate

  // breakdown updates
  document.getElementById('bdBAC').innerText = bac
  document.getElementById('bdHomieRev').innerText = pct
  document.getElementById('bdRebate').innerText = rebate
}

function hidePriceAndBac(){
  document.getElementById('priceAndBac').style.display = 'none'
}

function showPriceAndBac(){
  document.getElementById('priceAndBac').style.display = 'flex'
}

</script>
