<script>

window.addEventListener('load', load())

function load(){ 
  // mark selectPct as checked
  var selectPct = document.getElementById('selectPct')
  selectPct.checked = true
  
  // check for mobile view
  if (typeof window.orientation !== 'undefined' && screen.width * screen.height < 400000){
    convertToMobile()
  }
}

function convertToMobile(){
  var main = document.getElementsByClassName('main')[0]
  main.style.width = '100%'
  main.style.maxWidth = '100%'
  main.style.borderRadius = '0px'
  main.style.fontSize = '50px'
  
  var logo = document.getElementsByClassName('logo')[0]
  logo.style.marginTop = '40px'
  
  var header = document.getElementsByClassName('header')[0]
  header.style.fontSize = '60px'
  
  var inputs = document.getElementsByClassName('inputs')[0]
  inputs.style.flexDirection = 'column'
  inputs.style.maxWidth = 'calc(100% - 100px)'
  
  var inputHalf1 = document.getElementsByClassName('inputHalf')[0]
  var inputHalf2 = document.getElementsByClassName('inputHalf')[1]
  inputHalf1.style.width = '100%'
  inputHalf2.style.width = '100%'
  inputHalf1.style.alignItems = 'flex-start'
  inputHalf2.style.alignItems = 'flex-start'
  inputHalf2.style.marginTop = '30px'
  
  var inputDiv1 = document.getElementsByClassName('inputDiv')[0]
  var inputDiv2 = document.getElementsByClassName('inputDiv')[1]
  inputDiv1.style.fontSize = '40px'
  inputDiv2.style.fontSize = '40px'
  
  var bacType = document.getElementsByClassName('bacType')[0]
  bacType.style.fontSize = '50px'
  
  var bacTypeHalf1 = document.getElementsByClassName('bacTypeHalf')[0]
  var bacTypeHalf2 = document.getElementsByClassName('bacTypeHalf')[1]
  bacTypeHalf1.style.marginLeft = '30px'
  bacTypeHalf2.style.marginLeft = '30px'
  
  var selectPct = document.getElementById('selectPct')
  var selectDollars = document.getElementById('selectDollars')
  selectPct.style.fontSize = '50px'
  selectDollars.style.fontSize = '40px'
  
  var input1 = document.getElementsByClassName('input')[0]
  var input2 = document.getElementsByClassName('input')[1]
  input1.style.height = '80px'
  input2.style.height = '80px'
  input1.style.borderRadius = '8px'
  input2.style.borderRadius = '8px'
  input1.style.width = '100%'
  input2.style.width = '100px'
  input1.style.fontSize = '40px'
  input2.style.fontSize = '40px'
  input1.style.paddingLeft = '10px'
  input2.style.paddingLeft = '10px'
  
  var rebateBox = document.getElementsByClassName('rebateBox')[0]
  rebateBox.style.maxWidth = 'calc(100% - 400px)'
  rebateBox.style.height = '300px'
  rebateBox.style.marginTop = '50px'
  rebateBox.style.borderWidth = '7px'
  
  var rebateTitle = document.getElementsByClassName('rebateTitle')[0]
  rebateTitle.style.fontSize = '65px'
  
  var rebateDisplay = document.getElementsByClassName('rebateDisplay')[0]
  rebateDisplay.style.fontSize = '90px'
  
  var breakdown = document.getElementsByClassName('breakdown')[0]
  breakdown.style.fontSize = '50px'
  breakdown.style.maxWidth = '400px'
}

function usePct(){
  if (document.getElementById('selectDollars').checked == false){
    return
  }
  
  var bac = document.getElementById('bac')
  bac.placeholder = 'pct'
  bac.value = ''
  
  // update old 
  var oldEl = document.getElementById('selectDollars')
  oldEl.checked = false
  oldEl.style.fontWeight = 400
  oldEl.style.color = '#aaaaaa'
  
  // update new
  var newEl = document.getElementById('selectPct')
  newEl.checked = true
  newEl.style.fontWeight = 900
  newEl.style.color = '#00dec0'
  
  document.getElementById('pctSign').innerText = '%'
  document.getElementById('dollarSign').innerText = ''
  
  // check for mobile view
  if (typeof window.orientation !== 'undefined' && screen.height * screen.width < 400000){
    bac.style.width = '100px'
    oldEl.style.fontSize = "40px"
    newEl.style.fontSize = "50px"
  }
  else {
    bac.style.width = '40px'
    oldEl.style.fontSize = "20px"
    newEl.style.fontSize = "25px"
  }
}

function useDollars(){
  if (document.getElementById('selectPct').checked == false){
    return
  }

  var bac = document.getElementById('bac')
  bac.placeholder = 'dollars'
  bac.value = ''
  
  // update old 
  var oldEl = document.getElementById('selectPct')
  oldEl.checked = false
  oldEl.style.fontWeight = 400
  oldEl.style.color = '#aaaaaa'
  
  // update new
  var newEl = document.getElementById('selectDollars')
  newEl.checked = true
  newEl.style.fontWeight = 900
  newEl.style.color = '#00dec0'
  
  document.getElementById('pctSign').innerText = ''
  document.getElementById('dollarSign').innerText = '$'
  
  // check for mobile view
  if (typeof window.orientation !== 'undefined' && screen.height * screen.width < 400000){
    bac.style.width = '220px'
    oldEl.style.fontSize = "40px"
    newEl.style.fontSize = "50px"
  }
  else {
    bac.style.width = '80px'
    oldEl.style.fontSize = "20px"
    newEl.style.fontSize = "25px"
  }
}

function updateRebate(){
  var price = document.getElementById('price').value
  var bacVal = document.getElementById('bac').value
  var bac, homieRev, rebate, rebate50Pct, rebate5000
  
  // get total BAC
  var selectPct = document.getElementById('selectPct')
  if (selectPct.checked == true){
    bac = price * bacVal / 100
  }
  else {
    bac = bacVal
  }
  
  bac = Math.round(bac * 100) / 100
  
  // check if Homie makes $2500 before 50% split
  rebate50Pct = bac / 2
  if (rebate50Pct < 2500){
    rebate50Pct = (bac - 2500) / 2
  }
  
  // check if Homie makes $2500 before giving up to $5000
  rebate5000 = bac - 2500
  if (rebate5000 > 5000){
    rebate5000 = 5000
  }
  
  if (rebate5000 > rebate50Pct){
    rebate = rebate5000
  } else {
    rebate = rebate50Pct
  }
  
  // set rebate to 0 if negative
  if (rebate < 0){
    rebate = 0
  }
  
  rebate = Math.round(rebate * 100) / 100
  
  // main rebate figure
  document.getElementById('rebateNum').innerText = rebate
  
  // breakdown figures
  if (rebate > 0){
    document.getElementById('bdBAC').innerText = bac
    document.getElementById('bdHomieRev').innerText = bac - rebate
    document.getElementById('bdRebate').innerText = rebate
  } else {
    document.getElementById('bdBAC').innerText = bac
    document.getElementById('bdHomieRev').innerText = bac
    document.getElementById('bdRebate').innerText = 0
  }
}

</script>